<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>alcolog</title>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

        <script>
            var logs = {};

            function keyDownNumber(e){  //цельнотянуто с http://www.gotdotnet.ru/forums/4/47901/
                var key = (typeof e.charCode == 'undefined' ? e.keyCode : e.charCode);
                if (e.ctrlKey || e.altKey || key < 58) return true;
                else return false;
            };

            $(document).ready(function() {
                $(".datepicker").datepicker({dateFormat: 'dd.mm.yy', autoSize: true});

                $(".submit").click(function(){
                    var currentDate = $(".datepicker").val(),
                        currentDrink = $(".drinkpicker").val(),
                        currentVolume = $(".volumepicker").val();
                        commit = $(".commit");
                    if (!logs[currentDate]) {logs[currentDate] = {}};
                    if (!logs[currentDate][currentDrink]) {
                        logs[currentDate][currentDrink] = + currentVolume;
                    } else {
                        logs[currentDate][currentDrink] += + currentVolume;
                    };

                    $(this).attr('disabled', 'disabled').animate({disabled: ''}, 1000);
                    commit.text(currentDate + ' / ' + currentDrink + ' / ' + currentVolume + 'мл.').show();
                    setTimeout(function(){ commit.fadeOut() }, 3000);
                });

            });
        </script>
    </head>

    <body style="font-size:62.5%;">
        <table>
            <tr>
                <td>
                    <input type="text" class="datepicker" />
                    <select class="drinkpicker" >
                        <option disabled>Выберите напиток</option>
                        <option value="Пиво">Пиво</option>
                        <option selected value="Вино">Вино</option>
                        <option value="Водка">Водка</option>
                    </select>
                    <input type="text" style="text-align: right" size="7" class="volumepicker" onkeypress='return keyDownNumber(event);'/> мл.&nbsp;
                    <input type="button" value="Submit" class="submit"/>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="commit" style="width: auto; background-color: #ffa8a8; display: none;"></div>
                </td>
            </tr>
        </table>
    </body>
</html>
